# STM32_baremetal_ADC-DMA-UART-TIMER_interface

(reference manual for understanding and implementing the CMSIS based code)
https://www.st.com/resource/en/reference_manual/rm0368-stm32f401xbc-and-stm32f401xde-advanced-armbased-32bit-mcus-stmicroelectronics.pdf

REGISTERS used and their use case in my code:


118/852 -RCC_AHB1ENR -DMA2 clock enable,GPIO clock enable,
119/852 -RCC_APB1ENR -timer2 clock enable,ADC clock enable,USART2 clock enable
158/852 -GPIOx_MODER -mode 11: Analog mode
159/852 -GPIOx_PUPDR -mode 00:no pull up or down
162/852 -GPIOx_AFR - mode 0111: AF7(alternate func 7=)
188/852 -DMA_LISR -  TCIFx: Stream x transfer complete interrupt flag
190/852 -DMA_LIFCR -CTCIFx: Stream x clear transfer complete interrupt flag (x = 3..0)
                    CHTIFx: Stream x clear half transfer interrupt flag (x = 3..0)
                    CTEIFx: Stream x clear transfer error interrupt flag (x = 3..0)
                    CDMEIFx: Stream x clear direct mode error interrupt flag (x = 3..0)
                    CFEIFx: Stream x clear FIFO error interrupt flag (x = 3..0)
191/852 -DMA_SxCR -EN: Stream enable / flag stream ready when read low
                   TCIE: Transfer complete interrupt enable
                   CIRC: Circular mode
                   PSIZE[1:0]: Peripheral data size
                   CHSEL[2:0]: Channel selection
                   MINC: Memory increment mode
194/852 -DMA_SxNDTR -NDT[15:0]: Number of data items to transfer
195/852 -DMA_SxM0AR -M0A[31:0]: Memory 0 address
195/852 -DMA_SxPAR -PAR[31:0]: Peripheral address
230/853 -ADC_CCR -
232/853 -ADC_CR2 - EXTEN: External trigger enable for regular channels... 01- Trigger detection on the rising edge
                   EXTSEL[3:0]: External event select for regular group... 0110- Timer 2 TRGO event
                   DDS: DMA disable selection (for single ADC mode)
                   DMA: Direct memory access mode (for single ADC mode)
234/852 -ADC_SMPR1 -SMPx[2:0]: Channel x sampling time selection ... 001- 15 cycles
237/852 -ADC_SQR3
353/852 -TIMx_CR1 - ~CEN: timer disable for config      
                    CEN :timer enable after config
355/852 -TIMx_CR2 - MMS[2:0]: Master mode selection...  ~111: Compare - OC4REF signal is used as trigger output (TRGO)
                                                        010: Update - The update event is selected as trigger output (TRGO).
368/852 -TIMx_CNT - count
368/852 -TIMx_PSC -The counter clock frequency CK_CNT is equal to fCK_PSC / (PSC[15:0] + 1)
368/852 -TIMx_ARR - reloads timer and resets count
361/852 -TIMx_EGR - Bit 0 UG: Update generation
548/852 -USART_SR - Polling till tx register is not empty
551/852 -USART_DR - Data
551/852 -USART_BRR - Baud rate genration
551/852 -USART_CR - enable transmitter and usart
